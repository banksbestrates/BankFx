/*
 BSD-3-CLAUSE
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,p,g){a instanceof String&&(a=String(a));for(var h=a.length,e=0;e<h;e++){var A=a[e];if(p.call(g,A,e,a))return{i:e,v:A}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,p,g){a!=Array.prototype&&a!=Object.prototype&&(a[p]=g.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,p,g,h){if(p){g=$jscomp.global;a=a.split(".");for(h=0;h<a.length-1;h++){var e=a[h];e in g||(g[e]={});g=g[e]}a=a[a.length-1];h=g[a];p=p(h);p!=h&&null!=p&&$jscomp.defineProperty(g,a,{configurable:!0,writable:!0,value:p})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,g){return $jscomp.findInternal(this,a,g).v}},"es6","es3");
(function(a){function p(g,h){function e(b,k){b.preventDefault();var d=a(b.target).offset();clearTimeout(v);v=!1;if("undefined"!==typeof b.targetTouches){var e=Math.floor(b.targetTouches[0].pageX-d.left);b=Math.floor(b.targetTouches[0].pageY-d.top)}else e=Math.floor(b.pageX-d.left),b=Math.floor(b.pageY-d.top);if(m.x===e&&m.y===b)return!0;null===m.x&&(m.x=e);null===m.y&&(m.y=b);k&&(b+=k);f.beginPath();f.moveTo(m.x,m.y);f.lineTo(e,b);f.lineCap=c.penCap;f.stroke();f.closePath();q.push({lx:e,ly:b,mx:m.x,
my:m.y});m.x=e;m.y=b;c.onDraw&&"function"===typeof c.onDraw&&c.onDraw.apply(w)}function p(){var b=a(c.output,d).val();if(""!==b&&void 0!==b&&(b=JSON.parse(b),!(1>b.length))){for(var k=0,e=b.length;k<e;k++)f.beginPath(),f.moveTo(b[k].mx,b[k].my),f.lineTo(b[k].lx,b[k].ly),f.lineCap=c.penCap,f.stroke(),f.closePath();q=b}}function r(){t()}function t(b){b?e(b,1):(B?n.each(function(){this.removeEventListener("touchmove",e)}):n.unbind("mousemove.signaturepad"),0<q.length&&c.onDrawEnd&&"function"===typeof c.onDrawEnd&&
c.onDrawEnd.apply(w));m.x=null;m.y=null;c.output&&0<q.length&&a(c.output,d).val(JSON.stringify(q))}function u(){G();a(c.output,d).val("");q=[];t()}function G(){f.clearRect(0,0,l.width,l.height);f.fillStyle=c.bgColour;f.fillRect(0,0,l.width,l.height);c.displayOnly||c.lineWidth&&(f.beginPath(),f.lineWidth=c.lineWidth,f.strokeStyle=c.lineColour,f.moveTo(c.lineMargin,c.lineTop),f.lineTo(l.width-c.lineMargin,c.lineTop),f.stroke(),f.closePath());f.lineWidth=c.penWidth;f.strokeStyle=c.penColour}function H(b,
a){null==m.x?e(b,1):e(b,a)}function I(b,a){B?a.addEventListener("touchmove",H,!1):n.bind("mousemove.signaturepad",H);e(b,1)}function N(){D=!1;n.each(function(){this.removeEventListener&&(this.removeEventListener("touchend",r),this.removeEventListener("touchcancel",r),this.removeEventListener("touchmove",e));this.ontouchstart&&(this.ontouchstart=null)});a(document).unbind("mouseup.signaturepad");n.unbind("mousedown.signaturepad");n.unbind("mousemove.signaturepad");n.unbind("mouseleave.signaturepad");
a(c.clear,d).unbind("click.signaturepad")}function J(b){if(D)return!1;D=!0;a("input").blur();"undefined"!==typeof b.targetTouches&&(B=!0);B?(n.each(function(){this.addEventListener("touchend",r,!1);this.addEventListener("touchcancel",r,!1)}),n.unbind("mousedown.signaturepad")):(a(document).bind("mouseup.signaturepad",function(){y&&(t(),clearTimeout(v),y=v=!1)}),n.bind("mouseleave.signaturepad",function(b){y&&t(b);y&&!v&&(v=setTimeout(function(){t();clearTimeout(v);y=v=!1},500))}),n.each(function(){this.ontouchstart=
null}))}function E(){a(c.typed,d).hide();G();n.each(function(){this.ontouchstart=function(b){b.preventDefault();y=!0;J(b);I(b,this)}});n.bind("mousedown.signaturepad",function(b){b.preventDefault();if(1<b.which)return!1;y=!0;J(b);I(b)});a(c.clear,d).bind("click.signaturepad",function(b){b.preventDefault();u()});a(c.typeIt,d).bind("click.signaturepad",function(b){b.preventDefault();K()});a(c.drawIt,d).unbind("click.signaturepad");a(c.drawIt,d).bind("click.signaturepad",function(b){b.preventDefault()});
a(c.typeIt,d).removeClass(c.currentClass);a(c.drawIt,d).addClass(c.currentClass);a(c.sig,d).addClass(c.currentClass);a(c.typeItDesc,d).hide();a(c.drawItDesc,d).show();a(c.clear,d).show()}function K(){u();N();a(c.typed,d).show();a(c.drawIt,d).bind("click.signaturepad",function(b){b.preventDefault();E()});a(c.typeIt,d).unbind("click.signaturepad");a(c.typeIt,d).bind("click.signaturepad",function(b){b.preventDefault()});a(c.output,d).val("");a(c.drawIt,d).removeClass(c.currentClass);a(c.typeIt,d).addClass(c.currentClass);
a(c.sig,d).removeClass(c.currentClass);a(c.drawItDesc,d).hide();a(c.clear,d).hide();a(c.typeItDesc,d).show();x=z=a(c.typed,d).css("font-size").replace(/px/,"")}function L(b){var k=a(c.typed,d);b=a.trim(b.replace(/>/g,"&gt;").replace(/</g,"&lt;"));var e=C,f=.5*x;C=b.length;k.html(b);if(b){if(C>e&&k.outerWidth()>l.width)for(;k.outerWidth()>l.width;)x--,k.css("font-size",x+"px");if(C<e&&k.outerWidth()+f<l.width&&x<z)for(;k.outerWidth()+f<l.width&&x<z;)x++,k.css("font-size",x+"px")}else k.css("font-size",
z+"px")}function O(b,c){a("p."+c.errorClass,b).remove();b.removeClass(c.errorClass);a("input, label",b).removeClass(c.errorClass)}function P(b,c,d){b.nameInvalid&&(c.prepend(['<p class="',d.errorClass,'">',d.errorMessage,"</p>"].join("")),a(d.name,c).focus(),a(d.name,c).addClass(d.errorClass),a("label[for="+a(d.name).attr("id")+"]",c).addClass(d.errorClass));b.drawInvalid&&c.prepend(['<p class="',d.errorClass,'">',d.errorMessageDraw,"</p>"].join(""))}function F(){var b=!0,e={drawInvalid:!1,nameInvalid:!1},
f=[d,c],g=[e,d,c];c.onBeforeValidate&&"function"===typeof c.onBeforeValidate?c.onBeforeValidate.apply(w,f):O.apply(w,f);c.drawOnly&&1>q.length&&(e.drawInvalid=!0,b=!1);""===a(c.name,d).val()&&(e.nameInvalid=!0,b=!1);c.onFormError&&"function"===typeof c.onFormError?c.onFormError.apply(w,g):P.apply(w,g);return b}function M(b,a,d){for(var e in b)"object"===typeof b[e]&&(a.beginPath(),a.moveTo(b[e].mx,b[e].my),a.lineTo(b[e].lx,b[e].ly),a.lineCap=c.penCap,a.stroke(),a.closePath(),d&&q.push({lx:b[e].lx,
ly:b[e].ly,mx:b[e].mx,my:b[e].my}))}function Q(){4.1>parseFloat((/CPU.+OS ([0-9_]{3}).*AppleWebkit.*Mobile/i.exec(navigator.userAgent)||[0,"4_2"])[1].replace("_","."))&&(a.fn.Oldoffset=a.fn.offset,a.fn.offset=function(){var b=a(this).Oldoffset();b.top-=window.scrollY;b.left-=window.scrollX;return b});a(c.typed,d).bind("selectstart.signaturepad",function(b){return a(b.target).is(":input")});n.bind("selectstart.signaturepad",function(b){return a(b.target).is(":input")});!l.getContext&&FlashCanvas&&
FlashCanvas.initElement(l);l.getContext&&(f=l.getContext("2d"),a(c.sig,d).show(),c.displayOnly||(c.drawOnly||(a(c.name,d).bind("keyup.signaturepad",function(){L(a(this).val())}),a(c.name,d).bind("blur.signaturepad",function(){L(a(this).val())}),a(c.drawIt,d).bind("click.signaturepad",function(a){a.preventDefault();E()})),c.drawOnly||"drawIt"===c.defaultAction?(E(),p()):K(),c.validateFields&&(a(g).is("form")?a(g).bind("submit.signaturepad",function(){return F()}):a(g).parents("form").bind("submit.signaturepad",
function(){return F()})),a(c.sigNav,d).css("display","block")))}var w=this,c=a.extend({},a.fn.signaturePad.defaults,h),d=a(g),n=a(c.canvas,d),l=n.get(0),f=null,m={x:null,y:null},q=[],v=!1,y=!1,B=!1,D=!1,z=30,x=z,C=0;a.extend(w,{signaturePad:"{{version}}",init:function(){Q()},updateOptions:function(b){a.extend(c,b)},regenerate:function(b){w.clearCanvas();a(c.typed,d).hide();"string"===typeof b&&(b=JSON.parse(b));M(b,f,!0);c.output&&0<a(c.output,d).length&&a(c.output,d).val(JSON.stringify(q))},clearCanvas:function(){u()},
getSignature:function(){return q},getSignatureString:function(){return JSON.stringify(q)},getSignatureImage:function(){var a=document.createElement("canvas");a.style.position="absolute";a.style.top="-999em";a.width=l.width;a.height=l.height;document.body.appendChild(a);!a.getContext&&FlashCanvas&&FlashCanvas.initElement(a);var d=a.getContext("2d");d.fillStyle=c.bgColour;d.fillRect(0,0,l.width,l.height);d.lineWidth=c.penWidth;d.strokeStyle=c.penColour;M(q,d);d=a.toDataURL.apply(a,arguments);document.body.removeChild(a);
return d},validateForm:function(){return F()}})}a.fn.signaturePad=function(g){var h=null;this.each(function(){a.data(this,"plugin-signaturePad")?(h=a.data(this,"plugin-signaturePad"),h.updateOptions(g)):(h=new p(this,g),h.init(),a.data(this,"plugin-signaturePad",h))});return h};a.fn.signaturePad.defaults={defaultAction:"typeIt",displayOnly:!1,drawOnly:!1,canvas:"canvas",sig:".sig",sigNav:".sigNav",bgColour:"#ffffff",penColour:"#145394",penWidth:2,penCap:"round",lineColour:"#ccc",lineWidth:2,lineMargin:5,
lineTop:35,name:".name",typed:".typed",clear:".clearButton",typeIt:".typeIt a",drawIt:".drawIt a",typeItDesc:".typeItDesc",drawItDesc:".drawItDesc",output:".output",currentClass:"current",validateFields:!0,errorClass:"error",errorMessage:"Please enter your name",errorMessageDraw:"Please sign the document",onBeforeValidate:null,onFormError:null,onDraw:null,onDrawEnd:null}})(jQuery);
function frmSignatureJS(){function a(){if("undefined"!=typeof __FRMSIG)for(var a=__FRMSIG,g=0,h=a.length;g<h;g++){var e=a[g],A={name:!1,bgColour:"transparent",penColour:e.text_color,penWidth:1.5,lineColour:e.line_color,lineWidth:e.line_width,lineMargin:e.line_margin,lineTop:e.line_top,defaultAction:e.default_tab,validateFields:!1},r=e.width,t=jQuery(".frm_field_"+e.id+"_container:not(.frm_signature), #frm_field_"+e.id+"_container");if(!(1>t.length)){var u=t.find(".sigPad");u.is(":visible")&&(r=u.width());
0<r<parseInt(e.width)&&(u.attr("style","max-width:"+r+"px !important;"),t.find(".typed input").attr("style","max-width:"+(r-11)+"px !important;"),u.find("canvas").attr("width",r-4),t.find('input[name$="[width]"]').val(r-4));t.addClass("frm_signature");u.signaturePad(A)}}}return{init:function(){jQuery(".sigWrapper .typed").click(function(){jQuery(this).find("input").focus()});a();jQuery(document).on("frmPageChanged",a);jQuery(document).on("frmAfterAddRow",a);jQuery(document).on("frmFormComplete",a)}}}
var frmSignature=frmSignatureJS();jQuery(document).ready(function(){frmSignature.init()});
